<!DOCTYPE html> 
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>List | That Trip</title>
  
  <script src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-1.8.6.custom.min.js"></script>
  
  <script src="https://www.google.com/jsapi?key=ABQIAAAACDzvYe7uWvAlivmxsnYh7hT8yLnmi184xlX_BEGwis0Bw22VShSSH0B4EKXteNO8KJPmmghSHy6EZQ"></script>
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script src="js/latlon.js"></script>
  <script src="js/kml.js"></script>
  <script src="js/kmldomwalk.js"></script>
  
  <link href='http://fonts.googleapis.com/css?family=Lobster&subset=latin' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Inconsolata&subset=latin' rel='stylesheet' type='text/css'>
  <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.6.custom.css" rel="stylesheet" />	
  <link type="text/css" href="css/new.css" rel="stylesheet" />
<style>
#trips a {font-size: 16px;}
p {line-height: 100%;}
</style>
</head>
<body>
<div id="container">  
  <ul id="nav">
    <li><a href="/">New Trip</a></li>
    <li>View Trips</li>
  </ul>
  <h1>View Trips</h1>
  <ol id="trips">
  </ol>
  
  <div id="footer">
    <a href="http://www.google.com/moderator/#15/e=4442a&t=4442a.40">feedback</a> | <a href="http://www.borismus.com/kml-tours-google-earth">about</a> | <a href="http://twitter.com/borismus">twitter</a>
  </div>
</div>
<script>
$(function() {
  $.getJSON('/trips/', function(data) {
    data.sort(function(a, b) {
      return b.rating - a.rating;
    });
    // data = data.slice(0,20);
    $.each(data, function(index, item) {
      $('#trips').append('<li>' +
        '<a href="/trip?id=' + item.id + '">' + item.title + '</a><br/>' +
        item.rating + ' points by ' + item.author +
      '</li>');
    });
  });
  
});
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17930798-18']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>